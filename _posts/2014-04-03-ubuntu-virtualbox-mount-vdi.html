---
layout: post
title: 如何在Ubuntu 13.10中mount virtualbox的vdi文件
tags: [Ubuntu,VirtualBox,vdi]
categories: [OperatingSystem]
---
<!--break-->
在网络上搜索题记的问题，大部分给出的答案都是安装virtualbox-fuse。但是，virtualbox-fuse被从13.10的apt repository中移除了，所以需要自己去<a href="https://launchpad.net/ubuntu/raring/+package/virtualbox-fuse" target="_blank">Launchpad</a>下载。<br><br>下载之后，不能直接安装。因为这个virtualbox-fuse仅支持virtualbox (= 4.1.18-dfsg-1ubuntu1) ，而Ubuntu 13.10的apt repository中的virtualbox是4.2.16。直接安装deb是不行的。<br><br>好在我们也不是真的需要virtualbox-fuse，而是仅需要vdfuse这个可执行文件。那么，只要将deb文件解包，然后从中将vdfuse拷贝出来就可以了。<br><pre class="brush: shell; gutter: false; first-line: 1; highlight: []; html-script: false">sudo dpkg -x virtualbox-fuse_4.1.18-dfsg-1ubuntu1_amd64.deb out<br>sudo cp out/bin/vdfuse /bin<br>sudo chmod 755 /bin/vdfuse</pre><br>这样我们就有vdfuse这个命令可以用了。但是，还有一个问题，默认的fuse.conf不支持非root用户访问。这时需要修改一下，打开/etc/fuse.conf文件，将user_allow_other前面的“#”删除，保存一下。<br><br>接下来就可以进行mount工作了。<br>首先，通过vdfuse将vdi文件mount到一个临时的mount point上：<br><pre class="brush: shell; gutter: false; first-line: 1; highlight: []; html-script: false">vdfuse -f /xxxxx/xxxx.vdi ~/mnt/vdi_xxxx/</pre><br>这时候会得到一个~/mnt/vdi_xxxx/EntireDisk文件。再次mount：<br><pre class="brush: shell; gutter: false; first-line: 1; highlight: []; html-script: false">sudo mount ~/mnt/vdi_xxxx/EntireDisk ~/mnt/xxxx/</pre><br>OK！大功告成。<br><br>如果运行vdfuse的时候出现如下提示：<br>fusermount: failed to open /etc/fuse.conf: Permission denied<br><br>请检查是否/etc/fuse.conf文件设置了仅root用户可读。如果是的话，改一下就可以了：<br><pre class="brush: shell; gutter: false; first-line: 1; highlight: []; html-script: false">sudo chmod 644 /etc/fuse.conf</pre><br><br>如果Launchpad不能下载，这里有个备份：<br><a href="http://blog.zeerd.com/wp-content/uploads/2014/04/virtualbox-fuse_4.1.18-dfsg-1ubuntu1_amd64.zip">virtualbox-fuse_4.1.18-dfsg-1ubuntu1_amd64.zip</a>